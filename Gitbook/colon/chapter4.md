至于编程范式，单一个OOP，没有两年以上的实践和思考，是难以真正领会其精髓的。”



说过，单靠记忆只能触及知识之表，单靠练习只能深入知识之里，唯有培养方能渗透知识之根。



学会适度地容忍无知。请注意，容忍无知不是放任无知，而是一种学习的技巧，让无知成为求知的动力而不是障碍。容忍无知能使我们既不沮丧气馁，也不急于求成。在学习时不妨略过一些细节或难点，先概览全貌以获取感性认识，然后在逐步积累中升华为理性认识。



编程语言是具体的，背后的编程范式是抽象的。”



同样，如果你不了解编程范式，那么眼中的编程语言只是语法、语义、核心库、规范等组成的集合，写出的代码虽能编译、能工作，却会显得生硬、别扭。就像中式英语，语法正确、表达也正确，可就是不正宗、不地道。其症结我们在第一节课中已经提过了，即所谓的语感缺失。”



范式可以粗略理解为模范、模型、模式、风格、流派，等等。软件中的范式除了编程范式外，还有架构范式[1]、数据库范式[2]等。比如，对象导向式（Object-Oriented）可以应用于编程、架构和数据库中，分别成为OOP（Object-OrientedProgramming）、OOA（Object-OrientedArchitecture）和OODB（object-orienteddatabase）；类似地，事件驱动式（Event-Driven）可以是一种编程范式，可以是一种架构模型，也可以是一种设计模式。总之，每种范式都代表着一套独特而有效地解决问题的思想和方法。掌握范式对编程语感的提高至少有两层作用：首先，编程语言的语法、语义等都是从编程范式的树根衍生而出的枝叶，把握了这种脉络和节奏，代码才会如音乐舞蹈般韵律有致；其次，每种范式擅长的问题领域不尽相同，只有博闻广识，方可扬长避短，程序才会如行云流水般流畅自然。”



快速排序法（quicksort）？”


快速排序法的思想是：在列表中找一个基准元素，将所有小于它的元素划归一个子列，置于其前；将所有大于等于它的元素划归另一子列，置于其后。然后递归地对前后两个子列作同样处理，直至最终。”



过程式与函数式的差别同时也是机器思维与数学思维的差别。



函数式还有一个重要特征：无副作用或尽量减少副作用[4]。所谓无副作用，是指一个函数在被调用前后保持程序的状态不变。无副作用的函数不会改变非局部变量的值，不会改变传入的参数，也没有I/O操作。”



把命令式程序比作状态自动机，其运行过程就是在不断地修改机器的状态。而函数式程序则是进行表达式变换，一般不会改变变量的值。其实函数式并非完全不改变内存，只不过改变的是栈内存（stack）罢了。换言之，无副作用函数的作用关键在于其估值结果，按过程式的说法是返回值。



在涉及流程控制、顺序操作、状态维护、I/O运算等问题时，没有副作用是很不方便的。



首先，没有副作用的函数易于重构、调试和单元测试。



代码有效性与函数顺序无关，方便并发处理和优化处理。举个简单的例子，计算两个函数的乘积：f（x）*g（y）。由于无副作用，f（x）和g（y）的估值过程是独立的，估值顺序也不重要，因此理论上可以对二者并行计算。另外，还可利用惰性求值（lazyevaluation）[5]：如果算出f（x）为零，那么不用计算g（y）便可知乘积为零了。”



函数式编程不仅有许多独特的概念和方法，还有很深的数学背景——



程序员更习惯机器风格的过程式思维和现实风格的OOP思维，不容易接纳数学风格的函数式思维；客观上，函数式语言在表现力和运行效率[8]等方面与过程式和OOP语言也有一定差距。



它的整体应用虽然主要集中于数学计算、人工智能等领域，



➢不同的编程范式代表不同的解决问题的思想和方法。不同的编程语言提倡不同的编程范式，并在语法上给予支持。只有掌握范式，才能更合理、更有效地运用编程语言的语法和语义特征，并能针对不同的问题领域使用不同的编程风格，编写的代码才会和谐自然、富于美感。➢命令式编程须要指定计算的过程，着重微观的细节；声明式编程只须指定计算的原则，着重宏观的方向。因此二者繁简有别。➢在函数式编程中，函数是程序的核心，是头等公民，一般没有或很少有副作用，同时没有显式的内存管理。➢由于函数式编程中的高阶函数与基本数据类型平起平坐，故可将代码作数据用，这是程序既简洁又强大的原因之一。回调机制采用的正是函数式风格。➢无副作用的函数容易重构、调试和测试，便于并发和优化处理，并能贯彻和运用数学思维。➢惰性求值是需求驱动的，可以避免不必要的等待和计算。➢相比过程式和OOP，函数式编程思想过于数学化和抽象化，语言的表现力和运行效率也有所不足。



　逻辑范式——



评价代码的复杂度，长短只是一个因素。程序员不是打字员，花在思考上的时间和精力远远超过花在键盘上。算法=逻辑+控制。其中逻辑是算法的核心，控制主要用于改进算法的效率。




逻辑式编程中，程序员只需表达逻辑，而控制交给编程语言的解释器或编译器去管理。”



逻辑式编程模拟人类的逻辑思维，故而在机器证明、专家系统、自然语言处理、博弈等人工智能领域



➢代码的长度不是衡量软件复杂度的唯一标准。其中的逻辑结构越复杂、越微妙、受需求变化的影响越大，软件越难控制和维护。➢算法=逻辑+控制。逻辑式编程将算法中的控制部分大都移交给编程语言，编程人员主要关注算法的核心逻辑。这样大大减轻了程序员的负担，编码也更简洁易懂，更具可维护性和可扩展性。



➢有别于过程式和函数式，逻辑式没有明显的输入和输出之分。➢逻辑式编程不仅适用于人工智能方面的学术领域，同样广泛适用于各种涉及知识管理、决策分析等方面的应用领域。➢相对于命令式，逻辑式更简洁、更抽象、更少副作用，不仅能提高生产效率，还能用于快速原型开发。但在运行效率、可掌控性、语言成熟度等方面有所欠缺。另外，因其思维方式独特而鲜为人用，适合基于规则而非基于状态的应用。



汇总范式——



设计模式好比组合套路，能在一些特定场合下克敌制胜；编程范式则好比武功门派，博大精深且自成体系。




设计模式一般针对某一特定场景的问题，而编程范式针对的是广泛得多的问题领域，通常有一整套的思想和理论体系，具有全局性、系统性和渗透性，这一点在5大重要范式中显得尤为突出。因此，编程范式更普适更抽象，涉及的深度和广度也是设计模式难以比拟的。”




同样的思想用在整体系统的结构设计上，则称为架构模式；用在局部模块的细节实现上，则称为设计模式[14]；用在引导编程实践上，则称为编程范式。”




设计模式是遵循设计原则的一些具体技巧，以保证代码的可维护性、扩展性和可重用性为目的。它重在设计，对语言一般没有要求[15]。编程范式则不同，对语言往往有专门的要求。通常所说的某某范式的语言，即指该语言对该范式在语法上有明确充分的支持，不须要借助其他的范式或工具。事实上，
事实上，语言本来就是围绕其所倡导的核心范式来设计的[




过程式编程的数据与代码脱节，不方便维护；函数式和逻辑式的开发效率一般比过程式高，但运行效率和语言表现力则有所不如；对象式编程用于数学计算、符号处理等对象特征淡薄的领域，在心理上缺乏认知基础，在运行效率上不如纯过程式，在开发效率上不如函数式；并发式编程增加了代码的复杂度，加重了程序员的负担；泛型式编程影响了代码的可读性，过度使用模块还可能造成代码膨胀（codebloat）[18]；元编程过于强大，运用不当会超出程序员的控制，宜谨慎使用；切面式编程减少了程序的可预测性和可控性，同时给代码的跟踪调试带来一定困难，还可能造成性能上的损失；事件驱动式编程虽然也能用于同步的流程应用，但毕竟机制更复杂，没有普通的流程式编程那么自然易懂。”



➢相比设计模式，编程范式针对的问题领域更广泛，提出的思想和方法更普适、更抽象、更系统。此外，设计模式重在设计，对语言和工具的要求不高，而编程范式须要建立一套抽象机制和方法体系，离不开语言或工具的支持。➢编程范式的核心价值在于：突破原有编程方式的某些限制，带来新思维和新方法，从而进一步解放程序员的劳动力。➢正文中编程范式的汇总表格既是对此前知识的总结，也是对今后编程的指导。➢既要了解编程范式的长处，也要了解它们的短处。➢编程范式为神，编程语言为形，应以神导形、以形传神。



情景范式——




过函数式中的函数是头等公民



函数与其他基本数据类型一样，可以作为传递参数、返回值或与变量名绑定。闭包（closure）便是这样一种函数，并且还能保留当初创建时周围的环境变量。



可以这么理解：所谓包，指函数与其周围的环境变量捆绑打包；所谓闭，指这些变量是封闭的，只能为该函数所专用。



不妨认为闭包就是封装了环境变量的隐形对象的方法——通常是匿名方法。






```
functiond(f){
vardx=1;
returnfunction(y){return(f(y)+dx)}
}
functions(x){
return2*x;
}
d(s)(x);
```

中，传入的参数f和返回值都是函数，这是函数作为头等公民的特征。其中返回的匿名函数就是闭包，它附着了两个环境变量：外层函数的传入参数f和局部变量dx。”
如果不是闭包，这两个环境变量在d返回后就会失去效用。由此可见，合理地使用闭包能使代码更加简洁清晰，散发出函数式特有的优雅气质。”



闭包是一种能保留当初创建时环境变量的函数。它通常以匿名的方式存在，多用于函数式编程中，能使代码更加简洁清晰。Java中的匿名类可以看作OO化的闭包形式。




如关系数据库（relationaldatabase）、对象导向式数据库（object-orienteddatabase）



没有副作用的函数式语言被称为纯函数式（purelyfunctional），如Haskell和SISAL；有副作用的被称为非纯函数式（impurelyfunctional），如Lisp和ML。不过Haskell等语言也可通过monad来实现包括I/O在内的副作用。



设计模式有时被称为微架构（microarchitecture）模式。
















