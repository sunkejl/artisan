# 容量评估

[课程地址](http://mooc.study.163.com/learn/NEU-1000080001?tid=2001223005#/learn/content?type=detail&id=2001414087)

业务场景

服务器索引性能指标
预估可能成为瓶颈的服务器资源
帮助数据库性能调优

硬件性能指标
磁盘IO性能
内存容量
CPU
网络吞吐量
磁盘容量


数据库业务特点关键词
OLTP/OLAP类型
并发请求
并发请求读写比例
数据量
冷热数据比
数据分级存储

OLTP和OLAP
OL ONLINE  P PROCESS
T Transaction 面向用户 高并发 短事务操作
OLTP 看中CPU 内存 写事务多 内存不够则依赖磁盘IO

A analytical
面向内部人员 大规模复制查询
OLAP 看中磁盘扫描IO能力 部分依赖内存排序


并发请求数 衡量业务繁忙程度
业务高峰数据库每秒并发访问量是多少  10台服务器 100个最大连接 就可以支持10×100的连接数
主要依赖CPU 性能     

读写比例
select 和 update/insert 操作比例
读操作请求少量数据 delete/update通常是先读后写
insert需要区分是持续insert还是大量导入数据
多读操作 依赖 内存
多写操作 依赖磁盘IO能力


数据量
存储设备可扩展能力有上限
估算业务量  一个交易会写入多少数据
预估一年数据500G 预留一倍的余量
依赖 磁盘容量

冷热数据
热数据 一定周期被反复访问的数据
冷数据 线上保存 最近不会被在线用户访问到的数据
热数据放在内存中
依赖 内存容量 

线上数据分层存储
热数据确保存在内存中
较早的数据放在线上库磁盘中
更早的不常访问的数据迁移到历史库中

磁盘IO性能 单盘-》盘阵 SAS->STAT（性能不如SAS） 机械盘-》SSD（性能优于机械盘）

内存容量 较小内存 较大内存

CPU 普通-》多核 超线程

网络吞吐量 千兆-》万兆 单网卡-》多路

磁盘容量 单盘 单盘-》盘阵 单盘-》LVM


并发请求量 50台服务器 每台最大连接数100 可能峰值5000qps 并发请求大
CPU需求高

比如每天信息8K 总量5000万，总量400G
数据总量增长

10%属于热数据 40G

内存>40G 

磁盘>400G

网络流量 8K*2500/1024-20M 比如2500条信息同时访问

分级存储 把历史订单存入历史表

































