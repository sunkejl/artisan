一个页16KB=16*1024=16384byte(字节)=65535/4  var_char的65535是字符长度  1byte=8bit(比特)



InnoDB存储引擎内存由以下几个部分组成：缓冲池（buffer pool）、重做日志缓冲池（redo log buffer）以及额外的内存池（additional memory pool），分别由配置文件中的参数innodb_buffer_pool_size、innodb_log_buffer_size、innodb_additional_mem_pool_size的大小决定。

缓冲池中缓存的数据页类型有：索引页、数据页、undo页、插入缓冲（insert buffer），自适应哈希索引（adaptive hash index）、InnoDB存储的锁信息（lock info）、数据字典信息（data dictionary）等，缓冲池不仅有数据页和索引页，只是他们占缓冲池的很大部分，InnoDB存储引擎中内存的结构如下图：



缓冲池是用来存放各种数据的缓冲，因为InnoDB的存储引擎的工作方式总是将数据库文件按页（每页16K）读取到缓冲池，然后按最近最少使用（LRU）的算法来保留在缓冲池中的缓存数据。如果数据库文件需要修改，总是首先修改在缓冲池中的页（发生修改后，该页即为脏页），然后再按照一定的频率将缓冲池的脏页刷新（flush）到文件。


InnoDB 作为存储引擎接受来自 MySQL 上层的调用，最终修改底层文件数据。如果每次操作都立刻同步到文件系统，频繁的磁盘IO会严重数据库性能，所以 InnoDB 维护了一个内存缓冲池。执行读操作时，首先把磁盘读到的页放在缓存池中，下次相同页的读操作会直接从缓存中拿数据。同样的，执行修改操作会先对缓冲池的数据页修改，等待时机刷新回磁盘。

InnoDB 针对缓冲池的数据页刷新回磁盘的时机控制采用 CheckPoint 机制。就是在一些条件下触发回写磁盘操作，同时记录当前数据库的数据版本。缓冲池不够用，重写日志磁盘空间紧张都会强制执行同步磁盘。